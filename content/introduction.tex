\section{introduction}

Multirotor UAVs have been a topic of great research interest over the course of past decade. The first mathematical model of quadrotor vehicle capable of vertical takeoff and landing has been presented in \cite{hamel2002quad}. Since then, researchers have been working on various control designs, payload transportation and attaching manipulators on such vehicles. This research allowed UAVs to execute various tasks and interact with the environment. However, the common denominator in all that research is treating the payload and movement of the manipulator as a disturbance. Such approach puts all the effort for canceling these effects on controller. Although we are used to treating these effects as disturbances, a question arises: why don't we use them to our advantage? This underdog idea has not reached much attention in research community and it is one of the greatest motivators for this paper. The main goal is to develop a geometric controller capable of utilizing manipulator movement in order to track attitude. 

Geometric control concept is well known in aerial robotics community, and has previously been applied for classic quadrotor vehicles in \cite{LeeClanak4}, \cite{LeeClanak3}, \cite{LeeClanak1}. The UAV is considered to be in plus configuration and the CoG coincides with the body of the UAV. Furthermore, the model of the UAV is augmented with the CoG dynamics so we can exploit manipulator movement for attitude tracking. In our previous work we designed and implemented the Moving Mass Control concept (MMC) \cite{movingMass1}. In that paper we use a standard quadrotor UAV with mounted moving masses on the arms of the UAV while the control structure uses standard PID blocks. This is a novel concept first developed in \cite{movingMass2} with attitude control considered in \cite{movingMass3}. Up to this point, nonlinear geometric control has not been applied to the moving-mass controlled UAV.

Aside from aforementioned linear cartesian manipulator, we consider achieving CoG variations with planar manipulator. The envisioned scenario is payload transportation with such a manipulator where any displacement in the payload creates variations in CoG. UAVs endowed with manipulators have previously been studied in \cite{manipulator1}, \cite{manipulator2}. Similar problem has already been presented in \cite{manipulator3} where end-effector trajectory tracking of a single mounted 3-DOF manipulator is considered. However, in this paper, along with the different approach in controller synthesis, two 2-DOF manipulators are used, each carrying a payload. The main subject for trajectory tracking is still the UAV, while manipulators are considered as an extension, used only for attitude control.

Therefore, contributions of this paper are: to derive the appropriate dynamic model for UAVs with variable CoG on the SE(3) configuration manifold; choose control terms based on that model; and evaluate controller performance on a predefined trajectory tracking problem using two unique UAV models described previously. 

The paper is organized as follows. In Section \ref{sec:model} we present the generalized mathematical model on the SE(3) configuration manifold, along with expressions for CoG and moments of inertia. Based on that mathematical model, Section \ref{sec:model} shows how to obtain the proper control terms to achieve desirable error dynamics alongside sufficient stability conditions. In Section \ref{sec:simulation} we conduct two sets of simulations using Gazebo and ROS environment by executing the same trajectory for different UAVs. Finally, the conclusions are drawn in Section \ref{sec:conclusion}.

%Geometric control concept has previously been applied for classic quadrotor vehicles in \cite{LeeClanak4}, \cite{LeeClanak3}, \cite{LeeClanak1} set up in plus configuration with their CoG located inside the origin of the UAV body frame. Since a unique type of UAV is considered in this paper its mathematical model differs from aforementioned research. Unlike a standard UAV, whose CoG conicides with its body-fixed frame origin, it utilizes variations in CoG in order to achieve attitude tracking and stability. Essentially, this means that such variations, which would usually be considered a disturbance in the system, could be exploited as a means of controlling the UAV. Since a geometric controller is used in this paper, model dynamics need to be expressed on the SE(3) configuration manifold. It is important to note that unlike traditional quadrotor dynamics, CoG vector $\textbf{r}_{CoG}$ is also included in the mathematical model.\\ 
%One of the ways these variations are achieved is by implementing the moving mass control concept (MMC)\cite{movingMass1} on the standard quadrotor UAV. This includes mounting moving masses on the UAV arms, which offset acts as the control input of the system along with rotor speed variation. This is a novel concept first developed in \cite{movingMass2} with attitude control considered in \cite{movingMass3}. Up to this point, nonlinear geometric control has not been applied to the moving-mass controlled UAV.  \\
%Furthermore, CoG variations are achieved by mounting two manipulators to the UAV, each carrying a payload. In this case position of the payload directly determines any difference in CoG. UAVs endowed with manipulators have previously been studied in \cite{manipulator1}, \cite{manipulator2}. Similar problem has already been presented in \cite{manipulator3} where end-effector trajectory tracking of a single mounted 3-DOF manipulator is considered. However, in this paper, along with the different approach in controller synthesis, two 2-DOF manipulators are used, each carrying a payload. The main subject for trajectory tracking is still the UAV, while manipulators are considered as an extension, used only for attitude control. \\
%Therefore, the goal of this paper is to present the appropriate dynamic model for UAVs with variable CoG on the SE(3) configuration manifold, choose control terms based on that model and evaluate controller performance on a predefined trajectory tracking problem using two unique UAV models described previously. \\
%For realistic Gazebo simulations, we use $\mu$MORUS UAV, which is a scaled down version of the UAV developed within the MORUS project \cite{MORUSweb}. \\
%The paper is organized as follows. First the general mathematical model is presented on the SE(3) configuration manifold along with expressions for CoG and moments of inertia. Using that mathematical model, control terms are chosen such that desirable error dynamics can be obtained. Sufficient stability conditions are presented for the obtained error dynamics. Lastly, two sets of simulations are conducted using the Gazebo simulator and ROS environment. Both UAVs are compared using the same trajectory tracking problem in order to assess performance of each approach.